## 第9章习题

1. 修改代码9-1, 对8259芯片编程, 屏蔽除RTC外的其他所有中断, 观察字符"@"的变化速度.  
源代码中已经屏蔽了从片上除RTC中断外的所有中断, 所以只需要在主片上进行相应屏蔽操作即可, 在源代码sti指令上面添加  
```
      in al, 0x21       ; 把主片上除IR2以外的置1, 屏蔽中断
      and al, 0xfb
      out 0x21, al
```

2. 修改代码9-1, 使其用一种新的方法产生中断信号, 建议的方法是采用周期性中断, 不过, 这涉及选择分频电路的分节点, 比如, 你可以选择250ms或者500ms, 它们人别会在1秒钟内产生4次或2次中断.  
更改源代码中操作RTC寄存器B相应代码, 使其允许周期性中断.
```
      mov al,0x0b                        ;RTC寄存器B
      or al,0x80                         ;阻断NMI 
      out 0x70,al
      mov al,0x42                        ; 允许周期性中断
      out 0x71,al                        
```
接下来在RTC寄存器A上选择相应的频率, 这里选择2hz, 紧跟上面代码添加  
```
      mov al, 0x0a          ; 更改寄存器A中的数值, 每500ms产生一次中断
      or al, 0x80
      out 0x70, al
      in al, 0x71
      or al, 0x0f
      out 0x71, al
```